(this.webpackJsonpgame=this.webpackJsonpgame||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(3),a=n.n(c),i=(n(16),n(2)),d=(n(17),n(8)),o=n.n(d),s=n(1);function u(e){return Object(s.jsx)("button",{className:o.a.button,onClick:e.onClick,disabled:e.disabled,children:e.children})}var l=["A","B","C","D","E","F","G","H","I","J","K","M","N","L","O","P","Q","R"];function f(e){return Object(s.jsx)("div",{id:e.id,className:"card",onClick:e.onClick,children:Object(s.jsx)("span",{children:e.children})})}var p="ADD_CARD";var v="REMOVE_CARD";var h="SET_TIMER_CARD";var j="SET_SCORE";var b="START_GAME";var O="STOP_GAME";function m(e){var t=e.store,n=Object(r.useState)(!1),c=Object(i.a)(n,2),a=c[0],d=c[1],o=Object(r.useState)(120),m=Object(i.a)(o,2),S=m[0],C=m[1],_=Object(r.useState)(t.getState().score),g=Object(i.a)(_,2),x=g[0],E=g[1];Object(r.useEffect)((function(){return 0===S?(alert("\u0418\u0433\u0440\u0430 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0430\u0441\u044c \u0441\u043e \u0441\u0447\u0451\u0442\u043e\u043c: ".concat(x)),void R()):18===x?(alert("\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u044f\u043b\u0435\u043c \u0441 \u043f\u043e\u0431\u0435\u0434\u043e\u0439!"),void R()):void(a&&setTimeout((function(){C(S-1)}),1e3))}),[S,a,x]);var T=function(){t.dispatch({type:b}),d(!0)},y=function(){t.dispatch({type:O}),d(!1)},L=function(e){t.dispatch(function(e){return{type:j,score:e}}(e)),E(e)},M=function(e,n){var r,c={id:e,content:n},a=t.getState().openedCards;if(t.dispatch(function(e){var t=e.id,n=e.content;return{type:p,card:{id:t,content:n}}}(c)),null===(r=document.querySelector('.card[id="'.concat(e,'"]')))||void 0===r||r.classList.add("card_opened"),2!==a.length){if(1===a.length){var i=A(a,5e3);t.dispatch(function(e){return{type:h,timerFirstOpenCard:e}}(i))}}else{if(clearTimeout(t.getState().timerFirstOpenCard),a[0].content===a[1].content){L(t.getState().score+1);for(var d=0;d<a.length;d++){var o;null===(o=document.querySelector('.card[id="'.concat(a[d].id,'"]')))||void 0===o||o.classList.add("card_deleted")}return void A(a)}A(a,500)}},k=function(e){var n;null===(n=document.querySelector('.card[id="'.concat(e,'"]')))||void 0===n||n.classList.remove("card_opened"),t.dispatch(function(e){return{type:v,id:e}}(e))},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return setTimeout((function(){for(var t=0;t<e.length;t++)k(e[t].id)}),t)},R=function(){y(),setTimeout((function(){return C(120)}),1e3),L(0),clearTimeout(t.getState().timerFirstOpenCard),document.querySelectorAll(".card_deleted").forEach((function(e){e.classList.remove("card_deleted")})),document.querySelectorAll(".card_opened").forEach((function(e){e.classList.remove("card_opened")})),q(function(e){var t=e.slice();return t.sort((function(){return Math.random()-.5})),t}(N.slice()))},D=Object(r.useState)(function(e){var t=[];return l.forEach((function(n,r){for(var c=0;c<2;c++){var a=c+r*Math.random(),i=Object(s.jsxs)(f,{id:a,onClick:e,children:[" ",n," "]},a);t.push(i)}})),t.sort((function(){return Math.random()-.5})),t}((function(e){var t=e.currentTarget;if(a&&T(),!t.classList.contains("card_deleted")){if(t.classList.contains("card_opened"))return k(t.id),void t.classList.remove("card_opened");M(t.id,t.innerHTML),t.classList.add("card_opened")}}))),F=Object(i.a)(D,2),N=F[0],q=F[1];return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"panel",children:[Object(s.jsx)(u,{onClick:T,disabled:a,children:"Start"}),Object(s.jsx)(u,{onClick:y,disabled:!a,children:"Pause"}),Object(s.jsx)(u,{onClick:R,children:"Restart"})]}),Object(s.jsxs)("div",{className:"panel panel_non-padding",children:[Object(s.jsxs)("h3",{children:["Time: ",new Date(1e3*S).getMinutes(),":",new Date(1e3*S).getSeconds()]}),Object(s.jsxs)("h3",{children:["Score: ",x]})]}),Object(s.jsx)("div",{className:"area",children:N})]})}var S=n(11),C=n(4),_={openedCards:[],deletedCards:[],timerFirstOpenCard:"",score:0,isStarted:!1};var g=Object(C.b)((function(e,t){switch(t.type){case b:return console.log("Started"),e.isStarted=!0,e;case O:return console.log("Stoped"),e.isStarted=!1,e;case p:return e.openedCards.push(t.card),e;case v:return e.openedCards=e.openedCards.filter((function(e){return t.id!==e.id})),e;case j:return e.score=t.score,e;case h:e.timerFirstOpenCard=t.timerFirstOpenCard}return e}),_);a.a.render(Object(s.jsx)(S.a,{store:g,children:Object(s.jsx)(m,{store:g})}),document.getElementById("root"))},8:function(e,t,n){e.exports={button:"Button_button__2M2rP"}}},[[27,1,2]]]);
//# sourceMappingURL=main.ba3af7ad.chunk.js.map